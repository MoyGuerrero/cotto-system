USE `CALCULACOTT`
;
/****** Object:  StoredProcedure `pa_insertaunidadventaenc`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `pa_insertaunidadventaenc`
;
/****** Object:  StoredProcedure `pa_insertaperfilventaenc`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `pa_insertaperfilventaenc`
;
/****** Object:  StoredProcedure `pa_insertaperfilventadet`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `pa_insertaperfilventadet`
;
/****** Object:  StoredProcedure `pa_insertaperfiluniventaenc`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `pa_insertaperfiluniventaenc`
;
/****** Object:  StoredProcedure `pa_insertaperfiluniventadet`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `pa_insertaperfiluniventadet`
;
/****** Object:  StoredProcedure `pa_insertaperfiluhmlventaenc`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `pa_insertaperfiluhmlventaenc`
;
/****** Object:  StoredProcedure `pa_insertaperfiluhmlventadet`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `pa_insertaperfiluhmlventadet`
;
/****** Object:  StoredProcedure `pa_insertaperfilsfiventaenc`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `pa_insertaperfilsfiventaenc`
;
/****** Object:  StoredProcedure `pa_insertaperfilsfiventadet`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `pa_insertaperfilsfiventadet`
;
/****** Object:  StoredProcedure `pa_insertaperfilresventaenc`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `pa_insertaperfilresventaenc`
;
/****** Object:  StoredProcedure `pa_insertaperfilresventadet`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `pa_insertaperfilresventadet`
;
/****** Object:  StoredProcedure `pa_insertaperfilmicventaenc`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `pa_insertaperfilmicventaenc`
;
/****** Object:  StoredProcedure `pa_insertaperfilmicventadet`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `pa_insertaperfilmicventadet`
;
/****** Object:  StoredProcedure `pa_insertaperfilmicrestaenc`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `pa_insertaperfilmicrestaenc`
;
/****** Object:  StoredProcedure `Pa_Insertagradosclasificacion`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `Pa_Insertagradosclasificacion`
;
/****** Object:  StoredProcedure `Pa_InsertaDatosEmpresa`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `Pa_InsertaDatosEmpresa`
;
/****** Object:  StoredProcedure `Pa_InsertaCliente`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `Pa_InsertaCliente`
;
/****** Object:  StoredProcedure `Pa_Insertaclasesclasificacion`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `Pa_Insertaclasesclasificacion`
;
/****** Object:  StoredProcedure `pa_insertacalculoenc`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `pa_insertacalculoenc`
;
/****** Object:  StoredProcedure `pa_insertacalculodet`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `pa_insertacalculodet`
;
/****** Object:  StoredProcedure `pa_eliminarparametrosperfilunidet`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `pa_eliminarparametrosperfilunidet`
;
/****** Object:  StoredProcedure `pa_eliminarparametrosperfiluhmldet`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `pa_eliminarparametrosperfiluhmldet`
;
/****** Object:  StoredProcedure `pa_eliminarparametrosperfilsfidet`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `pa_eliminarparametrosperfilsfidet`
;
/****** Object:  StoredProcedure `pa_eliminarparametrosperfilresdet`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `pa_eliminarparametrosperfilresdet`
;
/****** Object:  StoredProcedure `pa_eliminarparametrosperfilmicdet`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `pa_eliminarparametrosperfilmicdet`
;
/****** Object:  StoredProcedure `pa_eliminarparametrosgradosclasif`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `pa_eliminarparametrosgradosclasif`
;
/****** Object:  StoredProcedure `pa_consultausoperfiluni`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `pa_consultausoperfiluni`
;
/****** Object:  StoredProcedure `pa_consultausoperfiluhml`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `pa_consultausoperfiluhml`
;
/****** Object:  StoredProcedure `pa_consultausoperfilstr`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `pa_consultausoperfilstr`
;
/****** Object:  StoredProcedure `pa_consultausoperfilsfi`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `pa_consultausoperfilsfi`
;
/****** Object:  StoredProcedure `pa_consultausoperfilmic`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `pa_consultausoperfilmic`
;
/****** Object:  StoredProcedure `pa_consultaunidadventa`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `pa_consultaunidadventa`
;
/****** Object:  StoredProcedure `pa_consultaresumencalculo`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `pa_consultaresumencalculo`
;
/****** Object:  StoredProcedure `pa_consultaprfilventadet`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `pa_consultaprfilventadet`
;
/****** Object:  StoredProcedure `pa_consultaperfilventaenc`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `pa_consultaperfilventaenc`
;
/****** Object:  StoredProcedure `pa_consultaperfilventacalculo`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `pa_consultaperfilventacalculo`
;
/****** Object:  StoredProcedure `pa_consultaperfiluniventaenc`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `pa_consultaperfiluniventaenc`
;
/****** Object:  StoredProcedure `pa_consultaperfiluniventadet`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `pa_consultaperfiluniventadet`
;
/****** Object:  StoredProcedure `pa_consultaperfiluhmlventaenc`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `pa_consultaperfiluhmlventaenc`
;
/****** Object:  StoredProcedure `pa_consultaperfiluhmlventadet`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `pa_consultaperfiluhmlventadet`
;
/****** Object:  StoredProcedure `pa_consultaperfilsfiventaenc`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `pa_consultaperfilsfiventaenc`
;
/****** Object:  StoredProcedure `pa_consultaperfilsfiventadet`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `pa_consultaperfilsfiventadet`
;
/****** Object:  StoredProcedure `pa_consultaperfilresventaenc`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `pa_consultaperfilresventaenc`
;
/****** Object:  StoredProcedure `pa_consultaperfilresventadet`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `pa_consultaperfilresventadet`
;
/****** Object:  StoredProcedure `pa_consultaperfilmicventaenc`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `pa_consultaperfilmicventaenc`
;
/****** Object:  StoredProcedure `pa_consultaperfilmicventadet`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `pa_consultaperfilmicventadet`
;
/****** Object:  StoredProcedure `pa_consultapacasdet`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `pa_consultapacasdet`
;
/****** Object:  StoredProcedure `pa_consultagradosclasificacion`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `pa_consultagradosclasificacion`
;
/****** Object:  StoredProcedure `pa_consultagradecalculo`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `pa_consultagradecalculo`
;
/****** Object:  StoredProcedure `pa_consultadatosempresa`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `pa_consultadatosempresa`
;
/****** Object:  StoredProcedure `pa_consultacombouniventa`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `pa_consultacombouniventa`
;
/****** Object:  StoredProcedure `pa_consultacombounidadventa`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `pa_consultacombounidadventa`
;
/****** Object:  StoredProcedure `pa_consultacombouhmlventa`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `pa_consultacombouhmlventa`
;
/****** Object:  StoredProcedure `pa_consultacombosfiventa`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `pa_consultacombosfiventa`
;
/****** Object:  StoredProcedure `pa_consultacomboresventa`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `pa_consultacomboresventa`
;
/****** Object:  StoredProcedure `pa_consultacomboperfilventa`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `pa_consultacomboperfilventa`
;
/****** Object:  StoredProcedure `pa_consultacombomicventa`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `pa_consultacombomicventa`
;
/****** Object:  StoredProcedure `pa_consultacliente`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `pa_consultacliente`
;
/****** Object:  StoredProcedure `pa_consultaclasesclasificacion`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `pa_consultaclasesclasificacion`
;
/****** Object:  StoredProcedure `pa_consultacasti;uni`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `pa_consultacasti;uni`
;
/****** Object:  StoredProcedure `pa_consultacasti;uhml`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `pa_consultacasti;uhml`
;
/****** Object:  StoredProcedure `pa_consultacasti;sfi`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `pa_consultacasti;sfi`
;
/****** Object:  StoredProcedure `pa_consultacasti;res`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `pa_consultacasti;res`
;
/****** Object:  StoredProcedure `pa_consultacasti;mic`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `pa_consultacasti;mic`
;
/****** Object:  StoredProcedure `pa_consultacalculos`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `pa_consultacalculos`
;
/****** Object:  StoredProcedure `pa_consultacalculoreporte`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP PROCEDURE `pa_consultacalculoreporte`
;
/****** Object:  Table `conf_datosempresa`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP TABLE `conf_datosempresa`
;
/****** Object:  Table `com_calcularenc`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP TABLE `com_calcularenc`
;
/****** Object:  Table `com_calculadet`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP TABLE `com_calculadet`
;
/****** Object:  Table `cat_unidadventa`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP TABLE `cat_unidadventa`
;
/****** Object:  Table `cat_perfilventaenc`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP TABLE `cat_perfilventaenc`
;
/****** Object:  Table `cat_perfilventadet`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP TABLE `cat_perfilventadet`
;
/****** Object:  Table `cat_perfiluniventaenc`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP TABLE `cat_perfiluniventaenc`
;
/****** Object:  Table `cat_perfiluniventadet`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP TABLE `cat_perfiluniventadet`
;
/****** Object:  Table `cat_perfiluhmlventaenc`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP TABLE `cat_perfiluhmlventaenc`
;
/****** Object:  Table `cat_perfiluhmlventadet`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP TABLE `cat_perfiluhmlventadet`
;
/****** Object:  Table `cat_perfilsfiventaenc`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP TABLE `cat_perfilsfiventaenc`
;
/****** Object:  Table `cat_perfilsfiventadet`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP TABLE `cat_perfilsfiventadet`
;
/****** Object:  Table `cat_perfilresventaenc`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP TABLE `cat_perfilresventaenc`
;
/****** Object:  Table `cat_perfilresventadet`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP TABLE `cat_perfilresventadet`
;
/****** Object:  Table `cat_perfilmicventaenc`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP TABLE `cat_perfilmicventaenc`
;
/****** Object:  Table `cat_perfilmicventadet`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP TABLE `cat_perfilmicventadet`
;
/****** Object:  Table `cat_gradosclasificacion`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP TABLE `cat_gradosclasificacion`
;
/****** Object:  Table `cat_clientes`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP TABLE `cat_clientes`
;
/****** Object:  Table `cat_clasesclasificacion`    Script Date: 12/04/2024 11:11:52 AM ******/
DROP TABLE `cat_clasesclasificacion`
;
/****** Object:  Table `cat_clasesclasificacion`    Script Date: 12/04/2024 11:11:52 AM ******/


CREATE TABLE `cat_clasesclasificacion`(
	`idclasesenc` int AUTO_INCREMENT NOT NULL,
	`idclasificacion` int NULL,
	`clave` varchar(6) NULL,
	`Descripcion` varchar(30) NULL,
PRIMARY KEY 
(
	`idclasesenc` ASC
),
UNIQUE NONCLUSTERED 
(
	`idclasificacion` ASC
)
)

;
/****** Object:  Table `cat_clientes`    Script Date: 12/04/2024 11:11:52 AM ******/


CREATE TABLE `cat_clientes`(
	`Idcliente` int AUTO_INCREMENT NOT NULL,
	`nombre` varchar(150) NULL,
	`rfc` varchar(15) NULL,
	`calle` varchar(150) NULL,
	`numext` varchar(10) NULL,
	`colonia` varchar(50) NULL,
	`codi;postal` varchar(8) NULL,
	`municipio` varchar(50) NULL,
	`estado` varchar(50) NULL,
	`pais` varchar(50) NULL,
	`nombrecontacto` varchar(150) NULL,
	`mail` varchar(50) NULL,
	`telefono` varchar(17) NULL,
PRIMARY KEY 
(
	`Idcliente` ASC
)
)

;
/****** Object:  Table `cat_gradosclasificacion`    Script Date: 12/04/2024 11:11:52 AM ******/


CREATE TABLE `cat_gradosclasificacion`(
	`Idgradosclasificacion` int AUTO_INCREMENT NOT NULL,
	`gradocolor` varchar(5) NULL,
	`trashid` int NULL,
	`descripcion` varchar(40) NULL,
	`idclase` int NULL,
PRIMARY KEY 
(
	`Idgradosclasificacion` ASC
)
)

;
/****** Object:  Table `cat_perfilmicventadet`    Script Date: 12/04/2024 11:11:52 AM ******/


CREATE TABLE `cat_perfilmicventadet`(
	`idperfildet` int AUTO_INCREMENT NOT NULL,
	`idperfilenc` int NULL,
	`ran;1` decimal(6, 2) NULL,
	`ran;2` decimal(6, 2) NULL,
	`casti;` decimal(6, 2) NULL,
PRIMARY KEY 
(
	`idperfildet` ASC
)
)

;
/****** Object:  Table `cat_perfilmicventaenc`    Script Date: 12/04/2024 11:11:52 AM ******/



CREATE TABLE `cat_perfilmicventaenc`(
	`idperfilenc` int AUTO_INCREMENT NOT NULL,
	`descripcion` varchar(30) NULL,
	`idestatus` int NULL,
	`fechacreacion` datetime NULL,
	`fechaactualizacion` datetime NULL,
PRIMARY KEY 
(
	`idperfilenc` ASC
)
)

;

/****** Object:  Table `cat_perfilresventadet`    Script Date: 12/04/2024 11:11:52 AM ******/


CREATE TABLE `cat_perfilresventadet`(
	`idperfildet` int AUTO_INCREMENT NOT NULL,
	`idperfilenc` int NULL,
	`ran;1` decimal(6, 2) NULL,
	`ran;2` decimal(6, 2) NULL,
	`casti;` decimal(6, 2) NULL,
PRIMARY KEY 
(
	`idperfildet` ASC
)
)

;
/****** Object:  Table `cat_perfilresventaenc`    Script Date: 12/04/2024 11:11:52 AM ******/



CREATE TABLE `cat_perfilresventaenc`(
	`idperfilenc` int AUTO_INCREMENT NOT NULL,
	`descripcion` varchar(30) NULL,
	`idestatus` int NULL,
	`fechacreacion` datetime NULL,
	`fechaactualizacion` datetime NULL,
PRIMARY KEY 
(
	`idperfilenc` ASC
)
)

;

/****** Object:  Table `cat_perfilsfiventadet`    Script Date: 12/04/2024 11:11:52 AM ******/


CREATE TABLE `cat_perfilsfiventadet`(
	`idperfildet` int AUTO_INCREMENT NOT NULL,
	`idperfilenc` int NULL,
	`ran;1` decimal(6, 2) NULL,
	`ran;2` decimal(6, 2) NULL,
	`casti;` decimal(6, 2) NULL,
PRIMARY KEY 
(
	`idperfildet` ASC
)
)

;
/****** Object:  Table `cat_perfilsfiventaenc`    Script Date: 12/04/2024 11:11:52 AM ******/



CREATE TABLE `cat_perfilsfiventaenc`(
	`idperfilenc` int AUTO_INCREMENT NOT NULL,
	`descripcion` varchar(30) NULL,
	`idestatus` int NULL,
	`fechacreacion` datetime NULL,
	`fechaactualizacion` datetime NULL,
PRIMARY KEY 
(
	`idperfilenc` ASC
)
)

;

/****** Object:  Table `cat_perfiluhmlventadet`    Script Date: 12/04/2024 11:11:52 AM ******/


CREATE TABLE `cat_perfiluhmlventadet`(
	`idperfildet` int AUTO_INCREMENT NOT NULL,
	`idperfilenc` int NULL,
	`ran;1` decimal(6, 2) NULL,
	`ran;2` decimal(6, 2) NULL,
	`LenghtNDS` int NULL,
	`casti;` decimal(6, 2) NULL,
PRIMARY KEY 
(
	`idperfildet` ASC
)
)

;
/****** Object:  Table `cat_perfiluhmlventaenc`    Script Date: 12/04/2024 11:11:52 AM ******/



CREATE TABLE `cat_perfiluhmlventaenc`(
	`idperfilenc` int AUTO_INCREMENT NOT NULL,
	`descripcion` varchar(30) NULL,
	`idestatus` int NULL,
	`fechacreacion` datetime NULL,
	`fechaactualizacion` datetime NULL,
PRIMARY KEY 
(
	`idperfilenc` ASC
)
)

;

/****** Object:  Table `cat_perfiluniventadet`    Script Date: 12/04/2024 11:11:52 AM ******/


CREATE TABLE `cat_perfiluniventadet`(
	`idperfildet` int AUTO_INCREMENT NOT NULL,
	`idperfilenc` int NULL,
	`ran;1` decimal(6, 2) NULL,
	`ran;2` decimal(6, 2) NULL,
	`casti;` decimal(6, 2) NULL,
PRIMARY KEY 
(
	`idperfildet` ASC
)
)

;
/****** Object:  Table `cat_perfiluniventaenc`    Script Date: 12/04/2024 11:11:52 AM ******/



CREATE TABLE `cat_perfiluniventaenc`(
	`idperfilenc` int AUTO_INCREMENT NOT NULL,
	`descripcion` varchar(30) NULL,
	`idestatus` int NULL,
	`fechacreacion` datetime NULL,
	`fechaactualizacion` datetime NULL,
PRIMARY KEY 
(
	`idperfilenc` ASC
)
)

;

/****** Object:  Table `cat_perfilventadet`    Script Date: 12/04/2024 11:11:52 AM ******/


CREATE TABLE `cat_perfilventadet`(
	`idperfildet` int AUTO_INCREMENT NOT NULL,
	`idperfilenc` int NULL,
	`idclasesenc` int NULL,
	`diferencial` int NULL,
PRIMARY KEY 
(
	`idperfildet` ASC
)
)

;
/****** Object:  Table `cat_perfilventaenc`    Script Date: 12/04/2024 11:11:52 AM ******/


CREATE TABLE `cat_perfilventaenc`(
	`idperfilenc` int AUTO_INCREMENT NOT NULL,
	`descripcion` varchar(30) NULL,
	`idestatus` int NULL,
	`fechacreacion` datetime NULL,
	`fechaactualizacion` datetime NULL,
PRIMARY KEY 
(
	`idperfilenc` ASC
)
)

;
/****** Object:  Table `cat_unidadventa`    Script Date: 12/04/2024 11:11:52 AM ******/


CREATE TABLE `cat_unidadventa`(
	`idperfilenc` int AUTO_INCREMENT NOT NULL,
	`descripcion` varchar(12) NULL,
	`valorunidad` decimal(10, 4) NULL,
	`idestatus` int NULL,
	`fechacreacion` datetime NULL,
	`fechaactualizacion` datetime NULL,
PRIMARY KEY 
(
	`idperfilenc` ASC
)
)

;
/****** Object:  Table `com_calculadet`    Script Date: 12/04/2024 11:11:52 AM ******/


CREATE TABLE `com_calculadet`(
	`idcalculodet` int AUTO_INCREMENT NOT NULL,
	`idcalculo` int NULL,
	`baleid` `bigint` NULL,
	`mic` double NULL,
	`uhml` double NULL,
	`ui` double NULL,
	`strength` double NULL,
	`sfi` double NULL,
	`elongation` double NULL,
	`grade` varchar(6) NULL,
	`colorgrade` varchar(4) NULL,
	`trashcount` int NULL,
	`trasharea` double NULL,
	`trashid` int NULL,
	`sci` int NULL,
	`kilos` decimal(10, 4) NULL,
	`preciopaca` decimal(18, 6) NULL,
	`precioclase` decimal(18, 4) NULL,
	`valorpeso` decimal(18, 4) NULL,
	`valorunidad` decimal(18, 4) NULL,
	`casti;mic` decimal(18, 4) NULL,
	`casti;uhml` decimal(18, 4) NULL,
	`casti;res` decimal(18, 4) NULL,
	`casti;uni` decimal(18, 4) NULL,
	`casti;sfi` decimal(18, 4) NULL,
 CONSTRAINT `PK__com_calc__578D85D42F8D68A4` PRIMARY KEY 
(
	`idcalculodet` ASC
)
)

;
/****** Object:  Table `com_calcularenc`    Script Date: 12/04/2024 11:11:52 AM ******/


CREATE TABLE `com_calcularenc`(
	`idcalculo` int AUTO_INCREMENT NOT NULL,
	`idcomprador` int NULL,
	`idunidadventa` int NULL,
	`valorunidad` decimal(10, 4) NULL,
	`precio` decimal(12,2) NULL,
	`puntos` decimal(12,2) NULL,
	`preciosm` decimal(12,2) NULL,
	`preciom` decimal(12,2) NULL,
	`preciomp` decimal(12,2) NULL,
	`precioslmp` decimal(12,2) NULL,
	`precioslm` decimal(12,2) NULL,
	`preciolmp` decimal(12,2) NULL,
	`preciolm` decimal(12,2) NULL,
	`precios;` decimal(12,2) NULL,
	`precio;` decimal(12,2) NULL,
	`precioo` decimal(12,2) NULL,
	`cantidadpacas` int NULL,
	`activatara` tinyint NULL,
	`valortara` decimal(4, 2) NULL,
	`idperfilventa` int NULL,
	`activamic` tinyint NULL,
	`idperfilmic` int NULL,
	`casti;mic` decimal(12,2) NULL,
	`activauhml` tinyint NULL,
	`idperfiluhml` int NULL,
	`casti;uhml` decimal(12,2) NULL,
	`activastr` tinyint NULL,
	`idperfilstr` int NULL,
	`casti;str` decimal(12,2) NULL,
	`activauni` tinyint NULL,
	`idperfiluni` int NULL,
	`casti;uni` decimal(12,2) NULL,
	`activasfi` tinyint NULL,
	`idperfilsfi` int NULL,
	`casti;sfi` decimal(12,2) NULL,
	`subtotal` decimal(12,2) NULL,
	`casti;total` decimal(12,2) NULL,
	`preciototal` decimal(12, 4) NULL,
	`observaciones` varchar(max) NULL,
	`fechacreacion` datetime NULL,
	`fechaactualizacion` datetime NULL,
 CONSTRAINT `PK__com_calc__8C8AEA8F1E2330E4` PRIMARY KEY 
(
	`idcalculo` ASC
)
)

;
/****** Object:  Table `conf_datosempresa`    Script Date: 12/04/2024 11:11:52 AM ******/



CREATE TABLE `conf_datosempresa`(
	`IdEmpresa` int AUTO_INCREMENT NOT NULL,
	`Razonsocial` varchar(150) NULL,
	`rfcempresa` varchar(15) NULL,
	`calleempresa` varchar(150) NULL,
	`numextempresa` varchar(10) NULL,
	`coloniaempresa` varchar(50) NULL,
	`cpempresa` varchar(8) NULL,
	`municipioempresa` varchar(50) NULL,
	`estadoempresa` varchar(50) NULL,
	`paisempresa` varchar(50) NULL,
	`nombrecontacto` varchar(150) NULL,
	`mailempresa` varchar(50) NULL,
	`telefonoempresa` varchar(17) NULL,
	`lo;empresa` `varbinary`(max) NULL,
PRIMARY KEY 
(
	`IdEmpresa` ASC
)
)

;

/****** Object:  StoredProcedure `pa_consultacalculoreporte`    Script Date: 12/04/2024 11:11:52 AM ******/


create procedure `pa_consultacalculoreporte`
@idcalculo int
as
		select co.idcalculo,
			co.idcomprador ,			
			co.idunidadventa ,
			cu.descripcion as unidadventa,
			co.valorunidad ,
			co.precio ,
			co.puntos ,
			co.preciosm ,
			co.preciom ,
			co.preciomp ,
			co.precioslmp ,
			co.precioslm ,
			co.preciolmp ,
			co.preciolm ,
			co.precios; ,
			co.precio; ,
			co.precioo ,
			co.cantidadpacas ,
			co.activatara ,
			co.valortara ,			
			co.activamic ,			
			co.casti;mic ,
			co.activauhml ,			
			co.casti;uhml ,
			co.activastr ,			
			co.casti;str ,
			co.activauni ,			
			co.casti;uni ,
			co.activasfi ,			
			co.casti;sfi ,
			co.subtotal ,
			co.casti;total ,
			co.preciototal ,
			co.observaciones ,
			co.fechacreacion ,
			co.fechaactualizacion
	from com_calcularenc co inner join cat_clientes cl on co.idcomprador = cl.Idcliente	
							inner join cat_unidadventa cu on co.idunidadventa = cu.idperfilenc
	where co.idcalculo = @idcalculo
	order by co.idcalculo
;
/****** Object:  StoredProcedure `pa_consultacalculos`    Script Date: 12/04/2024 11:11:52 AM ******/


CREATE procedure `pa_consultacalculos`
@nombrecomprador nvarchar(100),
@idcalculo int = 0
as
if @nombrecomprador <> '' and @idcalculo = 0
	begin
		select idcalculo,
				co.idcomprador ,
				cl.nombre,
				idunidadventa ,
				valorunidad ,
				precio ,
				puntos ,
				preciosm ,
				preciom ,
				preciomp ,
				precioslmp ,
				precioslm ,
				preciolmp ,
				preciolm ,
				precios; ,
				precio; ,
				precioo ,
				cantidadpacas ,
				activatara ,
				valortara ,
				idperfilventa ,
				activamic ,
				idperfilmic ,
				casti;mic ,
				activauhml ,
				idperfiluhml ,
				casti;uhml ,
				activastr ,
				idperfilstr ,
				casti;str ,
				activauni ,
				idperfiluni ,
				casti;uni ,
				activasfi ,
				idperfilsfi ,
				casti;sfi ,
				subtotal ,
				casti;total ,
				preciototal ,
				observaciones ,
				fechacreacion ,
				fechaactualizacion
		from com_calcularenc co inner join cat_clientes cl on co.idcomprador = cl.Idcliente
		where cl.nombre like '%'+@nombrecomprador+'%'
		order by co.idcalculo
	end
else if @nombrecomprador = '' and @idcalculo > 0
	begin
		select idcalculo,
			co.idcomprador ,			
			idunidadventa ,
			valorunidad ,
			precio ,
			puntos ,
			preciosm ,
			preciom ,
			preciomp ,
			precioslmp ,
			precioslm ,
			preciolmp ,
			preciolm ,
			precios; ,
			precio; ,
			precioo ,
			cantidadpacas ,
			activatara ,
			valortara ,
			idperfilventa ,
			activamic ,
			idperfilmic ,
			casti;mic ,
			activauhml ,
			idperfiluhml ,
			casti;uhml ,
			activastr ,
			idperfilstr ,
			casti;str ,
			activauni ,
			idperfiluni ,
			casti;uni ,
			activasfi ,
			idperfilsfi ,
			casti;sfi ,
			subtotal ,
			casti;total ,
			preciototal ,
			observaciones ,
			fechacreacion ,
			fechaactualizacion
	from com_calcularenc co inner join cat_clientes cl on co.idcomprador = cl.Idcliente	
	where co.idcalculo = @idcalculo
	order by co.idcalculo
	end
else
	begin
		select idcalculo,
			co.idcomprador ,
			cl.nombre,
			idunidadventa ,
			valorunidad ,
			precio ,
			puntos ,
			preciosm ,
			preciom ,
			preciomp ,
			precioslmp ,
			precioslm ,
			preciolmp ,
			preciolm ,
			precios; ,
			precio; ,
			precioo ,
			cantidadpacas ,
			activatara ,
			valortara ,
			idperfilventa ,
			activamic ,
			idperfilmic ,
			casti;mic ,
			activauhml ,
			idperfiluhml ,
			casti;uhml ,
			activastr ,
			idperfilstr ,
			casti;str ,
			activauni ,
			idperfiluni ,
			casti;uni ,
			activasfi ,
			idperfilsfi ,
			casti;sfi ,
			subtotal ,
			casti;total ,
			preciototal ,
			observaciones ,
			fechacreacion ,
			fechaactualizacion
	from com_calcularenc co inner join cat_clientes cl on co.idcomprador = cl.Idcliente	
	order by co.idcalculo
	end
;
/****** Object:  StoredProcedure `pa_consultacasti;mic`    Script Date: 12/04/2024 11:11:52 AM ******/


create procedure `pa_consultacasti;mic`
@idperfilenc int,
@valor decimal(6,2)
as
select casti;
from cat_perfilmicventadet
where idperfilenc = @idperfilenc and @valor between ran;1 and ran;2
;
/****** Object:  StoredProcedure `pa_consultacasti;res`    Script Date: 12/04/2024 11:11:52 AM ******/


create procedure `pa_consultacasti;res`
@idperfilenc int,
@valor decimal(6,2)
as
select casti;
from cat_perfilresventadet
where idperfilenc = @idperfilenc and @valor between ran;1 and ran;2
;
/****** Object:  StoredProcedure `pa_consultacasti;sfi`    Script Date: 12/04/2024 11:11:52 AM ******/


create procedure `pa_consultacasti;sfi`
@idperfilenc int,
@valor decimal(6,2)
as
select casti;
from cat_perfilsfiventadet
where idperfilenc = @idperfilenc and @valor between ran;1 and ran;2
;
/****** Object:  StoredProcedure `pa_consultacasti;uhml`    Script Date: 12/04/2024 11:11:52 AM ******/


create procedure `pa_consultacasti;uhml`
@idperfilenc int,
@valor decimal(6,2)
as
select casti;
from cat_perfiluhmlventadet
where idperfilenc = @idperfilenc and @valor between ran;1 and ran;2
;
/****** Object:  StoredProcedure `pa_consultacasti;uni`    Script Date: 12/04/2024 11:11:52 AM ******/


create procedure `pa_consultacasti;uni`
@idperfilenc int,
@valor decimal(6,2)
as
select casti;
from cat_perfiluniventadet
where idperfilenc = @idperfilenc and @valor between ran;1 and ran;2
;
/****** Object:  StoredProcedure `pa_consultaclasesclasificacion`    Script Date: 12/04/2024 11:11:52 AM ******/


create procedure `pa_consultaclasesclasificacion`
as
select idclasesenc ,
		idclasificacion ,
		clave ,
		Descripcion 
from cat_clasesclasificacion
order by idclasificacion
;
/****** Object:  StoredProcedure `pa_consultacliente`    Script Date: 12/04/2024 11:11:52 AM ******/


CREATE procedure `pa_consultacliente`
@idcliente int,
@nombre nvarchar(100)
as
if @nombre <> '' and @idcliente = 0
	begin
		select idcliente ,
				nombre ,
				rfc ,
				calle ,
				numext ,
				colonia ,
				codi;postal,
				municipio ,
				estado ,
				pais ,
				nombrecontacto,
				mail ,
				telefono
		from cat_clientes
		where nombre like '%'+@nombre+'%'	
		order by nombre	
	end
else if @nombre = '' and @idcliente > 0
	begin
		select idcliente ,
				nombre ,
				rfc ,
				calle ,
				numext ,
				colonia ,
				codi;postal,
				municipio ,
				estado ,
				pais ,
				nombrecontacto,
				mail ,
				telefono
		from cat_clientes
		where idcliente = @idcliente
		order by nombre
	end
else
	begin
		select idcliente ,
				nombre ,
				rfc ,
				calle ,
				numext ,
				colonia ,
				codi;postal,
				municipio ,
				estado ,
				pais ,
				nombrecontacto,
				mail ,
				telefono
		from cat_clientes
		order by nombre				
	end
;
/****** Object:  StoredProcedure `pa_consultacombomicventa`    Script Date: 12/04/2024 11:11:52 AM ******/


CREATE procedure `pa_consultacombomicventa`
as
select idperfilenc,
	   descripcion 
from cat_perfilmicventaenc
where idestatus = 1
order by idperfilenc
;
/****** Object:  StoredProcedure `pa_consultacomboperfilventa`    Script Date: 12/04/2024 11:11:52 AM ******/


create procedure `pa_consultacomboperfilventa`
as
select idperfilenc,descripcion
from cat_perfilventaenc
where idestatus = 1
order by idperfilenc
;
/****** Object:  StoredProcedure `pa_consultacomboresventa`    Script Date: 12/04/2024 11:11:52 AM ******/


create procedure `pa_consultacomboresventa`
as
select idperfilenc,
	   descripcion 
from cat_perfilresventaenc
where idestatus = 1
order by idperfilenc
;
/****** Object:  StoredProcedure `pa_consultacombosfiventa`    Script Date: 12/04/2024 11:11:52 AM ******/


create procedure `pa_consultacombosfiventa`
as
select idperfilenc,
	   descripcion 
from cat_perfilsfiventaenc
where idestatus = 1
order by idperfilenc
;
/****** Object:  StoredProcedure `pa_consultacombouhmlventa`    Script Date: 12/04/2024 11:11:52 AM ******/


create procedure `pa_consultacombouhmlventa`
as
select idperfilenc,
	   descripcion 
from cat_perfiluhmlventaenc
where idestatus = 1
order by idperfilenc
;
/****** Object:  StoredProcedure `pa_consultacombounidadventa`    Script Date: 12/04/2024 11:11:52 AM ******/


CREATE procedure `pa_consultacombounidadventa`
as
select idperfilenc,
		descripcion,
		valorunidad
from cat_unidadventa
where idestatus = 1
order by idperfilenc
;
/****** Object:  StoredProcedure `pa_consultacombouniventa`    Script Date: 12/04/2024 11:11:52 AM ******/


create procedure `pa_consultacombouniventa`
as
select idperfilenc,
	   descripcion 
from cat_perfiluniventaenc
where idestatus = 1
order by idperfilenc
;
/****** Object:  StoredProcedure `pa_consultadatosempresa`    Script Date: 12/04/2024 11:11:52 AM ******/


CREATE procedure `pa_consultadatosempresa`
@idempresa int
as
select idempresa ,
		razonsocial ,
		rfcempresa ,
		calleempresa ,
		numextempresa ,
		coloniaempresa ,
		cpempresa,
		municipioempresa ,
		estadoempresa ,
		paisempresa ,
		nombrecontacto,
		mailempresa ,
		telefonoempresa ,
		lo;empresa 
from conf_datosempresa
where idempresa = @idempresa
;
/****** Object:  StoredProcedure `pa_consultagradecalculo`    Script Date: 12/04/2024 11:11:52 AM ******/


create procedure `pa_consultagradecalculo`
@colorgrade nvarchar(4),
@trashid int
as
select cac.clave as grado 
from cat_gradosclasificacion cag inner join cat_clasesclasificacion cac on cag.idclase = cac.idclasificacion
where cag.gradocolor = @colorgrade and cag.trashid = @trashid
;
/****** Object:  StoredProcedure `pa_consultagradosclasificacion`    Script Date: 12/04/2024 11:11:52 AM ******/


CREATE procedure `pa_consultagradosclasificacion`
as
select cgc.Idgradosclasificacion,
	   cgc.gradocolor,
	   cgc.trashid,
	   cgc.descripcion,
	   cgc.idclase,
	   ccc.clave
from cat_gradosclasificacion cgc inner join cat_clasesclasificacion ccc on cgc.idclase = ccc.idclasificacion
order by gradocolor,trashid
;
/****** Object:  StoredProcedure `pa_consultapacasdet`    Script Date: 12/04/2024 11:11:52 AM ******/


CREATE procedure `pa_consultapacasdet`
@idcalculo int,
@sel bit = 0
as
SELECT idcalculodet
      ,idcalculo
      ,baleid
      ,mic
      ,uhml
      ,ui
      ,strength
      ,sfi
      ,elongation
      ,grade
      ,colorgrade
      ,trashcount
      ,trasharea
      ,trashid
      ,sci
      ,kilos
      ,preciopaca
      ,precioclase
      ,valorpeso
      ,valorunidad
      ,casti;mic
      ,casti;uhml
      ,casti;res
      ,casti;uni
      ,casti;sfi
	  ,@sel as Seleccionar
  FROM com_calculadet
  where idcalculo = @idcalculo
;
/****** Object:  StoredProcedure `pa_consultaperfilmicventadet`    Script Date: 12/04/2024 11:11:52 AM ******/


create procedure `pa_consultaperfilmicventadet`
@idperfilenc int
as
select idperfildet,
		idperfilenc,
		ran;1,
		ran;2,
		casti; 
from cat_perfilmicventadet
where idperfilenc = @idperfilenc
order by ran;1

;
/****** Object:  StoredProcedure `pa_consultaperfilmicventaenc`    Script Date: 12/04/2024 11:11:52 AM ******/


CREATE procedure `pa_consultaperfilmicventaenc`
as
select idperfilenc,
		descripcion,
		idestatus,
		case idestatus
		when 0 then 'Inactivo' 
		when 1 then 'Activo'
		end as estatus,
		fechacreacion,
		fechaactualizacion
from cat_perfilmicventaenc
order by idperfilenc
;
/****** Object:  StoredProcedure `pa_consultaperfilresventadet`    Script Date: 12/04/2024 11:11:52 AM ******/


create procedure `pa_consultaperfilresventadet`
@idperfilenc int
as
select idperfildet,
		idperfilenc,
		ran;1,
		ran;2,
		casti; 
from cat_perfilresventadet
where idperfilenc = @idperfilenc
order by ran;1
;
/****** Object:  StoredProcedure `pa_consultaperfilresventaenc`    Script Date: 12/04/2024 11:11:52 AM ******/


create procedure `pa_consultaperfilresventaenc`
as
select idperfilenc,
		descripcion,
		idestatus,
		case idestatus
		when 0 then 'Inactivo' 
		when 1 then 'Activo'
		end as estatus,
		fechacreacion,
		fechaactualizacion
from cat_perfilresventaenc
order by idperfilenc
;
/****** Object:  StoredProcedure `pa_consultaperfilsfiventadet`    Script Date: 12/04/2024 11:11:52 AM ******/


create procedure `pa_consultaperfilsfiventadet`
@idperfilenc int
as
select idperfildet,
		idperfilenc,
		ran;1,
		ran;2,
		casti; 
from cat_perfilsfiventadet
where idperfilenc = @idperfilenc
order by ran;1
;
/****** Object:  StoredProcedure `pa_consultaperfilsfiventaenc`    Script Date: 12/04/2024 11:11:52 AM ******/


create procedure `pa_consultaperfilsfiventaenc`
as
select idperfilenc,
		descripcion,
		idestatus,
		case idestatus
		when 0 then 'Inactivo' 
		when 1 then 'Activo'
		end as estatus,
		fechacreacion,
		fechaactualizacion
from cat_perfilsfiventaenc
order by idperfilenc
;
/****** Object:  StoredProcedure `pa_consultaperfiluhmlventadet`    Script Date: 12/04/2024 11:11:52 AM ******/


CREATE procedure `pa_consultaperfiluhmlventadet`
@idperfilenc int
as
select idperfildet,
		idperfilenc,
		ran;1,
		ran;2,
		lenghtNDS,
		casti; 
from cat_perfiluhmlventadet
where idperfilenc = @idperfilenc
order by lenghtNDS
;
/****** Object:  StoredProcedure `pa_consultaperfiluhmlventaenc`    Script Date: 12/04/2024 11:11:52 AM ******/


create procedure `pa_consultaperfiluhmlventaenc`
as
select idperfilenc,
		descripcion,
		idestatus,
		case idestatus
		when 0 then 'Inactivo' 
		when 1 then 'Activo'
		end as estatus,
		fechacreacion,
		fechaactualizacion
from cat_perfiluhmlventaenc
order by idperfilenc
;
/****** Object:  StoredProcedure `pa_consultaperfiluniventadet`    Script Date: 12/04/2024 11:11:52 AM ******/


create procedure `pa_consultaperfiluniventadet`
@idperfilenc int
as
select idperfildet,
		idperfilenc,
		ran;1,
		ran;2,
		casti; 
from cat_perfiluniventadet
where idperfilenc = @idperfilenc
order by ran;1
;
/****** Object:  StoredProcedure `pa_consultaperfiluniventaenc`    Script Date: 12/04/2024 11:11:52 AM ******/


create procedure `pa_consultaperfiluniventaenc`
as
select idperfilenc,
		descripcion,
		idestatus,
		case idestatus
		when 0 then 'Inactivo' 
		when 1 then 'Activo'
		end as estatus,
		fechacreacion,
		fechaactualizacion
from cat_perfiluniventaenc
order by idperfilenc
;
/****** Object:  StoredProcedure `pa_consultaperfilventacalculo`    Script Date: 12/04/2024 11:11:52 AM ******/


create procedure `pa_consultaperfilventacalculo`
@idperfilenc int
as
select cp.idperfilenc,cc.clave,cp.diferencial
from cat_perfilventadet cp inner join cat_clasesclasificacion cc on cp.idclasesenc = cc.idclasesenc
where idperfilenc = @idperfilenc
order by cc.idclasificacion
;
/****** Object:  StoredProcedure `pa_consultaperfilventaenc`    Script Date: 12/04/2024 11:11:52 AM ******/


create procedure `pa_consultaperfilventaenc`
as
select idperfilenc,
		descripcion,
		idestatus,
		case idestatus
		 when 0 then 'INACTIVO'
		 WHEN 1 THEN 'ACTIVO'
		 END AS estatus,
		fechacreacion,
		fechaactualizacion
from cat_perfilventaenc
order by idperfilenc
;
/****** Object:  StoredProcedure `pa_consultaprfilventadet`    Script Date: 12/04/2024 11:11:52 AM ******/


CREATE procedure `pa_consultaprfilventadet`
@idperfilenc int = 0
as 
if @idperfilenc > 0
	begin
		select cpv.idperfildet,
			   cpv.idperfilenc,
			   ccc.idclasesenc,
			   ccc.idclasificacion,
			   ccc.Descripcion,
			   ccc.clave,
			   isnull(cpv.diferencial,0) as diferencial
		from cat_clasesclasificacion ccc right join cat_perfilventadet cpv on ccc.idclasesenc = cpv.idclasesenc
		where isnull(cpv.idperfilenc,0) = @idperfilenc
		order by ccc.idclasificacion
	end
else
	begin
		select 0 as idperfildet,
			   0 as idperfilenc,
			   ccc.idclasesenc,
			   ccc.idclasificacion,
			   ccc.Descripcion,
			   ccc.clave,
			   0 as diferencial
		from cat_clasesclasificacion ccc 		
		order by ccc.idclasificacion
	end

;
/****** Object:  StoredProcedure `pa_consultaresumencalculo`    Script Date: 12/04/2024 11:11:52 AM ******/


CREATE procedure `pa_consultaresumencalculo`
@idcalculo int
as
select sum(coc.preciopaca) as preciopaca
	  ,coc.precioclase
	  ,cac.idclasificacion
	  ,coc.grade
	  ,sum(coc.valorpeso) as valorpeso
	  ,sum(coc.valorunidad) as valorunidad
	  ,sum(coc.casti;mic) as casti;mic 
	  ,sum(coc.casti;uhml) as casti;uhml 
	  ,sum(coc.casti;res) as casti;res 
	  ,sum(coc.casti;uni) as casti;uni 
	  ,sum(coc.casti;sfi) as casti;sfi  
	  ,count(baleid) as cantidadpacas
from com_calculadet coc inner join cat_clasesclasificacion cac ON coc.grade = cac.clave
where idcalculo = @idcalculo
group by cac.idclasificacion,coc.grade,coc.precioclase
order by cac.idclasificacion
;
/****** Object:  StoredProcedure `pa_consultaunidadventa`    Script Date: 12/04/2024 11:11:52 AM ******/


CREATE procedure `pa_consultaunidadventa`
as
select idperfilenc,
	   descripcion,
	   valorunidad,
	   idestatus,
	   case idestatus
	   when 0 then 'Inactivo'
	   when 1 then 'Activo'
	   end as estatus,
	   fechacreacion,
	   fechaactualizacion 
from cat_unidadventa
order by idperfilenc
;
/****** Object:  StoredProcedure `pa_consultausoperfilmic`    Script Date: 12/04/2024 11:11:52 AM ******/


CREATE procedure `pa_consultausoperfilmic`
@idperfilenc int
as
if exists (select idperfilmic from com_calcularenc where idperfilmic = @idperfilenc)
begin
	select 1 as existe
end
else
begin
	select 0 as existe
end	
;
/****** Object:  StoredProcedure `pa_consultausoperfilsfi`    Script Date: 12/04/2024 11:11:52 AM ******/


CREATE procedure `pa_consultausoperfilsfi`
@idperfilenc int
as
if exists (select idperfilsfi from com_calcularenc where idperfilsfi = @idperfilenc)
begin
	select 1 as existe
end
else
begin
	select 0 as existe
end	
;
/****** Object:  StoredProcedure `pa_consultausoperfilstr`    Script Date: 12/04/2024 11:11:52 AM ******/


CREATE procedure `pa_consultausoperfilstr`
@idperfilenc int
as
if exists (select idperfilstr from com_calcularenc where idperfilstr = @idperfilenc)
begin
	select 1 as existe
end
else
begin
	select 0 as existe
end	
;
/****** Object:  StoredProcedure `pa_consultausoperfiluhml`    Script Date: 12/04/2024 11:11:52 AM ******/


CREATE procedure `pa_consultausoperfiluhml`
@idperfilenc int
as
if exists (select idperfiluhml from com_calcularenc where idperfiluhml = @idperfilenc)
begin
	select 1 as existe
end
else
begin
	select 0 as existe
end	
;
/****** Object:  StoredProcedure `pa_consultausoperfiluni`    Script Date: 12/04/2024 11:11:52 AM ******/


CREATE procedure `pa_consultausoperfiluni`
@idperfilenc int
as
if exists (select idperfiluni from com_calcularenc where idperfiluni = @idperfilenc)
begin
	select 1 as existe
end
else
begin
	select 0 as existe
end	
;
/****** Object:  StoredProcedure `pa_eliminarparametrosgradosclasif`    Script Date: 12/04/2024 11:11:52 AM ******/


create procedure `pa_eliminarparametrosgradosclasif`
as
truncate table cat_gradosclasificacion
;
/****** Object:  StoredProcedure `pa_eliminarparametrosperfilmicdet`    Script Date: 12/04/2024 11:11:52 AM ******/


CREATE procedure `pa_eliminarparametrosperfilmicdet`
@idperfilenc int
as
delete 
from cat_perfilmicventadet
where idperfilenc = @idperfilenc
;
/****** Object:  StoredProcedure `pa_eliminarparametrosperfilresdet`    Script Date: 12/04/2024 11:11:52 AM ******/


create procedure `pa_eliminarparametrosperfilresdet`
@idperfilenc int
as
delete 
from cat_perfilresventadet
where idperfilenc = @idperfilenc
;
/****** Object:  StoredProcedure `pa_eliminarparametrosperfilsfidet`    Script Date: 12/04/2024 11:11:52 AM ******/


create procedure `pa_eliminarparametrosperfilsfidet`
@idperfilenc int
as
delete 
from cat_perfilsfiventadet
where idperfilenc = @idperfilenc
;
/****** Object:  StoredProcedure `pa_eliminarparametrosperfiluhmldet`    Script Date: 12/04/2024 11:11:52 AM ******/


create procedure `pa_eliminarparametrosperfiluhmldet`
@idperfilenc int
as
delete 
from cat_perfiluhmlventadet
where idperfilenc = @idperfilenc
;
/****** Object:  StoredProcedure `pa_eliminarparametrosperfilunidet`    Script Date: 12/04/2024 11:11:52 AM ******/


create procedure `pa_eliminarparametrosperfilunidet`
@idperfilenc int
as
delete 
from cat_perfiluniventadet
where idperfilenc = @idperfilenc
;
/****** Object:  StoredProcedure `pa_insertacalculodet`    Script Date: 12/04/2024 11:11:52 AM ******/


CREATE procedure `pa_insertacalculodet`
@idcalculodet int,
@idcalculo int,
@baleid bigint,
@mic float,
@uhml float,
@ui float,
@strength float,
@sfi float,
@elongation float,
@grade nvarchar(6),
@colorgrade nvarchar(4),
@trashcount int,
@trasharea float,
@trashid int,
@sci int,
@kilos decimal(10,4),
@preciopaca decimal(18,6),
@precioclase decimal(18,4),
@valorpeso decimal(18,4),
@valorunidad decimal(18,4),
@casti;mic decimal(18,4),
@casti;uhml decimal(18,4),
@casti;res decimal(18,4),
@casti;uni decimal(18,4),
@casti;sfi decimal(18,4)
as
begin
	set nocount on 
	merge com_calculadet as target
	using (select @idcalculodet ,
			@idcalculo ,
			@baleid ,
			@mic ,
			@uhml ,
			@ui ,
			@strength ,
			@sfi ,
			@elongation ,
			@grade ,
			@colorgrade ,
			@trashcount ,
			@trasharea ,
			@trashid ,
			@sci ,
			@kilos ,
			@preciopaca ,
			@precioclase ,
			@valorpeso ,
			@valorunidad ,
			@casti;mic ,
			@casti;uhml ,
			@casti;res ,
			@casti;uni ,
			@casti;sfi )
	AS SOURCE (idcalculodet ,
			idcalculo ,
			baleid ,
			mic ,
			uhml ,
			ui ,
			strength ,
			sfi ,
			elongation ,
			grade ,
			colorgrade ,
			trashcount ,
			trasharea ,
			trashid ,
			sci ,
			kilos ,
			preciopaca ,
			precioclase ,
			valorpeso ,
			valorunidad ,
			casti;mic ,
			casti;uhml ,
			casti;res ,
			casti;uni ,
			casti;sfi )
	ON (Target.idcalculo = source.idcalculo and target.baleid = source.baleid)
	when matched then
	update set baleid = source.baleid ,	
			mic = source.mic ,							
			uhml = source.uhml ,
			ui = source.ui ,
			strength = source.strength ,
			sfi = source.sfi ,			
			elongation = source.elongation ,
			grade = source.grade ,				
			colorgrade = source.colorgrade ,
			trashcount = source.trashcount ,
			trasharea = source.trasharea ,
			trashid = source.trashid ,
			sci = source.sci ,			
			kilos = source.kilos ,
			preciopaca = source.preciopaca ,
			precioclase = source.precioclase ,
			valorpeso = source.valorpeso ,
			valorunidad = source.valorunidad ,
			casti;mic = source.casti;mic ,
			casti;uhml = source.casti;uhml ,
			casti;res = source.casti;res ,
			casti;uni = source.casti;uni ,
			casti;sfi = source.casti;sfi
	when not matched then
	insert (idcalculo ,			
			baleid ,	
			mic ,					
			uhml ,
			ui ,
			strength ,
			sfi ,
			elongation ,			
			grade ,			
			colorgrade ,
			trashcount ,
			trasharea ,
			trashid ,
			sci ,
			kilos ,
			preciopaca ,
			precioclase ,
			valorpeso ,
			valorunidad ,
			casti;mic ,
			casti;uhml ,
			casti;res ,
			casti;uni ,
			casti;sfi)
	values (source.idcalculo ,
			source.baleid ,
			source.mic ,
			source.uhml ,
			source.ui ,
			source.strength ,
			source.sfi ,
			source.elongation ,
			source.grade ,
			source.colorgrade ,
			source.trashcount ,
			source.trasharea ,
			source.trashid ,
			source.sci ,
			source.kilos ,
			source.preciopaca ,
			source.precioclase ,
			source.valorpeso ,
			source.valorunidad ,
			source.casti;mic ,
			source.casti;uhml ,
			source.casti;res ,
			source.casti;uni ,
			source.casti;sfi);
end
;
/****** Object:  StoredProcedure `pa_insertacalculoenc`    Script Date: 12/04/2024 11:11:52 AM ******/


create procedure `pa_insertacalculoenc`
@idcalculo int output,
@idcomprador int,
@idunidadventa int,
@valorunidad decimal(10,4),
@precio money,
@puntos money,
@preciosm money,
@preciom money,
@preciomp money,
@precioslmp money,
@precioslm money,
@preciolmp money,
@preciolm money,
@precios; money,
@precio; money,
@precioo money,
@cantidadpacas int,
@activatara bit,
@valortara decimal(4,2),
@idperfilventa int,
@activamic bit,
@idperfilmic int,
@casti;mic money,
@activauhml bit,
@idperfiluhml int,
@casti;uhml money,
@activastr bit,
@idperfilstr int,
@casti;str money,
@activauni bit,
@idperfiluni int,
@casti;uni money,
@activasfi bit,
@idperfilsfi int,
@casti;sfi money,
@subtotal money,
@casti;total money,
@preciototal money,
@observaciones nvarchar(max),
@fechacreacion datetime,
@fechaactualizacion datetime
as
begin
	set nocount on
	merge com_calcularenc as target
	using (select @idcalculo,
					@idcomprador ,
					@idunidadventa ,
					@valorunidad ,
					@precio ,
					@puntos ,
					@preciosm ,
					@preciom ,
					@preciomp ,
					@precioslmp ,
					@precioslm ,
					@preciolmp ,
					@preciolm ,
					@precios; ,
					@precio; ,
					@precioo ,
					@cantidadpacas ,
					@activatara ,
					@valortara ,
					@idperfilventa ,
					@activamic ,
					@idperfilmic ,
					@casti;mic ,
					@activauhml ,
					@idperfiluhml ,
					@casti;uhml ,
					@activastr ,
					@idperfilstr ,
					@casti;str ,
					@activauni ,
					@idperfiluni ,
					@casti;uni ,
					@activasfi ,
					@idperfilsfi ,
					@casti;sfi ,
					@subtotal ,
					@casti;total ,
					@preciototal ,
					@observaciones ,
					@fechacreacion ,
					@fechaactualizacion )
	as source (idcalculo,
					idcomprador ,
					idunidadventa ,
					valorunidad ,
					precio ,
					puntos ,
					preciosm ,
					preciom ,
					preciomp ,
					precioslmp ,
					precioslm ,
					preciolmp ,
					preciolm ,
					precios; ,
					precio; ,
					precioo ,
					cantidadpacas ,
					activatara ,
					valortara ,
					idperfilventa ,
					activamic ,
					idperfilmic ,
					casti;mic ,
					activauhml ,
					idperfiluhml ,
					casti;uhml ,
					activastr ,
					idperfilstr ,
					casti;str ,
					activauni ,
					idperfiluni ,
					casti;uni ,
					activasfi ,
					idperfilsfi ,
					casti;sfi ,
					subtotal ,
					casti;total ,
					preciototal ,
					observaciones ,
					fechacreacion ,
					fechaactualizacion )
	on (target.idcalculo = source.idcalculo)
	when matched then
	update set 		idcomprador  = source.idcomprador,
					idunidadventa  = source.idunidadventa,
					valorunidad  = source.valorunidad,
					precio  = source.precio,
					puntos  = source.puntos,
					preciosm  = source.preciosm,
					preciom  = source.preciom,
					preciomp  = source.preciomp,
					precioslmp  = source.precioslmp,
					precioslm  = source.precioslm,
					preciolmp  = source.preciolmp,
					preciolm  = source.preciolm,
					precios;  = source.precios;,
					precio;  = source.precio;,
					precioo  = source.precioo,
					cantidadpacas  = source.cantidadpacas,
					activatara  = source.activatara,
					valortara  = source.valortara,
					idperfilventa  = source.idperfilventa,
					activamic  = source.activamic,
					idperfilmic  = source.idperfilmic,
					casti;mic  = source.casti;mic,
					activauhml  = source.activauhml,
					idperfiluhml  = source.idperfiluhml,
					casti;uhml  = source.casti;uhml,
					activastr  = source.activastr,
					idperfilstr  = source.idperfilstr,
					casti;str  = source.casti;str,
					activauni  = source.activauni,
					idperfiluni  = source.idperfiluni,
					casti;uni  = source.casti;uni,
					activasfi  = source.activasfi,
					idperfilsfi  = source.idperfilsfi,
					casti;sfi  = source.casti;sfi,
					subtotal  = source.subtotal,
					casti;total  = source.casti;total,
					preciototal  = source.preciototal,
					observaciones  = source.observaciones,					
					fechaactualizacion  = source.fechaactualizacion
	when not matched then
	insert (idcomprador ,
					idunidadventa ,
					valorunidad ,
					precio ,
					puntos ,
					preciosm ,
					preciom ,
					preciomp ,
					precioslmp ,
					precioslm ,
					preciolmp ,
					preciolm ,
					precios; ,
					precio; ,
					precioo ,
					cantidadpacas ,
					activatara ,
					valortara ,
					idperfilventa ,
					activamic ,
					idperfilmic ,
					casti;mic ,
					activauhml ,
					idperfiluhml ,
					casti;uhml ,
					activastr ,
					idperfilstr ,
					casti;str ,
					activauni ,
					idperfiluni ,
					casti;uni ,
					activasfi ,
					idperfilsfi ,
					casti;sfi ,
					subtotal ,
					casti;total ,
					preciototal ,
					observaciones ,
					fechacreacion ,
					fechaactualizacion)
	values (source.idcomprador ,
					source.idunidadventa ,
					source.valorunidad ,
					source.precio ,
					source.puntos ,
					source.preciosm ,
					source.preciom ,
					source.preciomp ,
					source.precioslmp ,
					source.precioslm ,
					source.preciolmp ,
					source.preciolm ,
					source.precios; ,
					source.precio; ,
					source.precioo ,
					source.cantidadpacas ,
					source.activatara ,
					source.valortara ,
					source.idperfilventa ,
					source.activamic ,
					source.idperfilmic ,
					source.casti;mic ,
					source.activauhml ,
					source.idperfiluhml ,
					source.casti;uhml ,
					source.activastr ,
					source.idperfilstr ,
					source.casti;str ,
					source.activauni ,
					source.idperfiluni ,
					source.casti;uni ,
					source.activasfi ,
					source.idperfilsfi ,
					source.casti;sfi ,
					source.subtotal ,
					source.casti;total ,
					source.preciototal ,
					source.observaciones ,
					source.fechacreacion ,
					source.fechaactualizacion);
	set @idcalculo = SCOPE_IDENTITY()
end
return @idcalculo
;
/****** Object:  StoredProcedure `Pa_Insertaclasesclasificacion`    Script Date: 12/04/2024 11:11:52 AM ******/


create procedure `Pa_Insertaclasesclasificacion`
@idclasesenc int output,
@idclasificacion int,
@clave nvarchar(6),
@Descripcion nvarchar(30)
as 
begin 
set nocount on
merge cat_clasesclasificacion as target
using (select @idclasesenc ,
				@idclasificacion ,
				@clave ,
				@Descripcion ) 
	AS SOURCE (idclasesenc ,
				idclasificacion ,
				clave ,
				Descripcion )
ON (target.idclasesenc = SOURCE.idclasesenc)
WHEN MATCHED THEN
UPDATE SET idclasificacion = SOURCE.idclasificacion, 
		   clave = SOURCE.clave,
		   Descripcion = SOURCE.Descripcion
WHEN NOT MATCHED THEN
INSERT (idclasificacion ,
		clave ,
		Descripcion)
        VALUES (SOURCE.idclasificacion ,
		SOURCE.clave ,
		SOURCE.Descripcion );
		SET @idclasesenc = SCOPE_IDENTITY()
		END
return @idclasesenc
;
/****** Object:  StoredProcedure `Pa_InsertaCliente`    Script Date: 12/04/2024 11:11:52 AM ******/


CREATE procedure `Pa_InsertaCliente`
@idcliente int output,
@nombre nvarchar(150),
@rfc nvarchar(15),
@calle nvarchar(150),
@numext nvarchar(10),
@colonia nvarchar(50),
@codi;postal nvarchar(8),
@municipio nvarchar(50),
@estado nvarchar(50),
@pais nvarchar(50),
@nombrecontacto nvarchar(150),
@mail nvarchar(50),
@telefono nvarchar(17)
as 
begin 
set nocount on
merge cat_clientes as target
using (select @idcliente ,
				@nombre ,
				@rfc ,
				@calle ,
				@numext ,
				@colonia ,
				@codi;postal,
				@municipio ,
				@estado ,
				@pais ,
				@nombrecontacto,
				@mail ,
				@telefono ) 
	AS SOURCE (idcliente ,
				nombre ,
				rfc ,
				calle ,
				numext ,
				colonia ,
				codi;postal ,
				municipio ,
				estado ,
				pais ,
				nombrecontacto,
				mail ,
				telefono )
ON (target.idcliente = SOURCE.idcliente)
WHEN MATCHED THEN
UPDATE SET nombre = SOURCE.nombre, 
		   rfc = SOURCE.rfc,
		   calle = SOURCE.calle,
		   numext = SOURCE.numext,
		   colonia = SOURCE.colonia,
		   codi;postal = SOURCE.codi;postal,
		   municipio = SOURCE.municipio,
		   estado = SOURCE.estado,
		   pais = SOURCE.pais,
		   nombrecontacto = SOURCE.nombrecontacto,
		   mail = SOURCE.mail,
		   telefono = SOURCE.telefono
WHEN NOT MATCHED THEN
INSERT (nombre ,
		rfc ,
		calle ,
		numext ,
		colonia ,
		codi;postal,
		municipio ,
		estado ,
		pais ,
		nombrecontacto,
		mail ,
		telefono )
        VALUES (SOURCE.nombre ,
		SOURCE.rfc ,
		SOURCE.calle ,
		SOURCE.numext ,
		SOURCE.colonia ,
		SOURCE.codi;postal,
		SOURCE.municipio ,
		SOURCE.estado ,
		SOURCE.pais ,
		SOURCE.nombrecontacto ,
		SOURCE.mail ,
		SOURCE.telefono);
		SET @idcliente = SCOPE_IDENTITY()
		END
return @idcliente
;
/****** Object:  StoredProcedure `Pa_InsertaDatosEmpresa`    Script Date: 12/04/2024 11:11:52 AM ******/


CREATE procedure `Pa_InsertaDatosEmpresa`
@idempresa int ,
@razonsocial nvarchar(150),
@rfcempresa nvarchar(15),
@calleempresa nvarchar(150),
@numextempresa nvarchar(10),
@coloniaempresa nvarchar(50),
@cpempresa nvarchar(8),
@municipioempresa nvarchar(50),
@estadoempresa nvarchar(50),
@paisempresa nvarchar(50),
@nombrecontacto nvarchar(150),
@mailempresa nvarchar(50),
@telefonoempresa nvarchar(17),
@lo;empresa varbinary(max)
as 
begin 
set nocount on
merge conf_datosempresa as target
using (select @idempresa ,
				@razonsocial ,
				@rfcempresa ,
				@calleempresa ,
				@numextempresa ,
				@coloniaempresa ,
				@cpempresa,
				@municipioempresa ,
				@estadoempresa ,
				@paisempresa ,
				@mailempresa ,
				@nombrecontacto,
				@telefonoempresa ,
				@lo;empresa ) 
	AS SOURCE (idempresa ,
				razonsocial ,
				rfcempresa ,
				calleempresa ,
				numextempresa ,
				coloniaempresa ,
				cpempresa ,
				municipioempresa ,
				estadoempresa ,
				paisempresa ,
				nombrecontacto,
				mailempresa ,
				telefonoempresa ,
				lo;empresa )
ON (target.idempresa = SOURCE.idempresa)
WHEN MATCHED THEN
UPDATE SET razonsocial = SOURCE.razonsocial, 
		   rfcempresa = SOURCE.rfcempresa,
		   calleempresa = SOURCE.calleempresa,
		   numextempresa = SOURCE.numextempresa,
		   coloniaempresa = SOURCE.coloniaempresa,
		   cpempresa = SOURCE.cpempresa,
		   municipioempresa = SOURCE.municipioempresa,
		   estadoempresa = SOURCE.estadoempresa,
		   paisempresa = SOURCE.paisempresa,
		   nombrecontacto = SOURCE.nombrecontacto,
		   mailempresa = SOURCE.mailempresa,
		   telefonoempresa = SOURCE.telefonoempresa,
		   lo;empresa = SOURCE.lo;empresa
WHEN NOT MATCHED THEN
INSERT (razonsocial ,
		rfcempresa ,
		calleempresa ,
		numextempresa ,
		coloniaempresa ,
		cpempresa,
		municipioempresa ,
		estadoempresa ,
		paisempresa ,
		nombrecontacto ,
		mailempresa ,
		telefonoempresa ,
		lo;empresa)
        VALUES (SOURCE.razonsocial ,
		SOURCE.rfcempresa ,
		SOURCE.calleempresa ,
		SOURCE.numextempresa ,
		SOURCE.coloniaempresa ,
		SOURCE.cpempresa,
		SOURCE.municipioempresa ,
		SOURCE.estadoempresa ,
		SOURCE.paisempresa ,
		SOURCE.nombrecontacto ,
		SOURCE.mailempresa ,
		SOURCE.telefonoempresa ,
		SOURCE.lo;empresa);
		SET @idempresa = SCOPE_IDENTITY()
		END
;
/****** Object:  StoredProcedure `Pa_Insertagradosclasificacion`    Script Date: 12/04/2024 11:11:52 AM ******/


create procedure `Pa_Insertagradosclasificacion`
@Idgradosclasificacion int output,
@gradocolor nvarchar(5),
@trashid int,
@descripcion nvarchar(40),
@idclase int
as 
begin 
set nocount on
merge cat_gradosclasificacion as target
using (select @Idgradosclasificacion ,
				@gradocolor ,
				@trashid ,
				@descripcion ,
				@idclase ) 
	AS SOURCE (Idgradosclasificacion ,
				gradocolor ,
				trashid ,
				descripcion ,
				idclase )
ON (target.Idgradosclasificacion = SOURCE.Idgradosclasificacion)
WHEN MATCHED THEN
UPDATE SET gradocolor = SOURCE.gradocolor, 
		   trashid = SOURCE.trashid,
		   descripcion = SOURCE.descripcion,
		   idclase = SOURCE.idclase
WHEN NOT MATCHED THEN
INSERT (gradocolor ,
		trashid ,
		descripcion,
		idclase)
        VALUES (SOURCE.gradocolor ,
		SOURCE.trashid ,
		SOURCE.descripcion ,
		SOURCE.idclase );
		SET @Idgradosclasificacion = SCOPE_IDENTITY()
		END
return @Idgradosclasificacion
;
/****** Object:  StoredProcedure `pa_insertaperfilmicrestaenc`    Script Date: 12/04/2024 11:11:52 AM ******/


CREATE procedure `pa_insertaperfilmicrestaenc`
@idperfilenc int output,
@descripcion nvarchar(30),
@idestatus int,
@fechacreacion datetime,
@fechaactualizacion datetime
as 
begin
	set nocount on
	merge cat_perfilmicventaenc as target
	using (select @idperfilenc,
				  @descripcion ,
				  @idestatus ,
				  @fechacreacion ,
				  @fechaactualizacion )
	as source (idperfilenc,
				descripcion ,
				idestatus ,
				fechacreacion ,
				fechaactualizacion )
	on (target.idperfilenc = source.idperfilenc)
	when matched then
	update set descripcion = source.descripcion ,
				idestatus = source.idestatus ,
				fechaactualizacion = source.fechaactualizacion
	when not matched then
	insert (descripcion ,
				idestatus ,
				fechacreacion ,
				fechaactualizacion)
	values (source.descripcion ,
				source.idestatus ,
				source.fechacreacion ,
				source.fechaactualizacion);
	set @idperfilenc = SCOPE_IDENTITY()
end
return @idperfilenc
;
/****** Object:  StoredProcedure `pa_insertaperfilmicventadet`    Script Date: 12/04/2024 11:11:52 AM ******/


create procedure `pa_insertaperfilmicventadet`
@idperfildet int,
@idperfilenc int,
@ran;1 decimal(6,2),
@ran;2 decimal(6,2),
@casti; decimal(6,2)
as
begin
	set nocount on
	merge cat_perfilmicventadet as target
	using (select @idperfildet ,
					@idperfilenc ,
					@ran;1 ,
					@ran;2 ,
					@casti; )
	as source (idperfildet ,
					idperfilenc ,
					ran;1 ,
					ran;2 ,
					casti;  )
	on (target.idperfildet = source.idperfildet and 
		target.idperfilenc = source.idperfilenc)
	when matched then
	update set 		ran;1 = source.ran;1 ,
					ran;2 = source.ran;2 ,
					casti; = source.casti;
	when not matched then
	insert (idperfilenc ,
					ran;1 ,
					ran;2 ,
					casti; )
	values (source.idperfilenc ,
					source.ran;1 ,
					source.ran;2 ,
					source.casti; );
	set @idperfilenc = SCOPE_IDENTITY()	
end
;
/****** Object:  StoredProcedure `pa_insertaperfilmicventaenc`    Script Date: 12/04/2024 11:11:52 AM ******/


create procedure `pa_insertaperfilmicventaenc`
@idperfilenc int output,
@descripcion nvarchar(30),
@idestatus int,
@fechacreacion datetime,
@fechaactualizacion datetime
as 
begin
	set nocount on
	merge cat_perfilmicventaenc as target
	using (select @idperfilenc,
				  @descripcion ,
				  @idestatus ,
				  @fechacreacion ,
				  @fechaactualizacion )
	as source (idperfilenc,
				descripcion ,
				idestatus ,
				fechacreacion ,
				fechaactualizacion )
	on (target.idperfilenc = source.idperfilenc)
	when matched then
	update set descripcion = source.descripcion ,
				idestatus = source.idestatus ,
				fechaactualizacion = source.fechaactualizacion
	when not matched then
	insert (descripcion ,
				idestatus ,
				fechacreacion ,
				fechaactualizacion)
	values (source.descripcion ,
				source.idestatus ,
				source.fechacreacion ,
				source.fechaactualizacion);
	set @idperfilenc = SCOPE_IDENTITY()
end
return @idperfilenc
;
/****** Object:  StoredProcedure `pa_insertaperfilresventadet`    Script Date: 12/04/2024 11:11:52 AM ******/


create procedure `pa_insertaperfilresventadet`
@idperfildet int,
@idperfilenc int,
@ran;1 decimal(6,2),
@ran;2 decimal(6,2),
@casti; decimal(6,2)
as
begin
	set nocount on
	merge cat_perfilresventadet as target
	using (select @idperfildet ,
					@idperfilenc ,
					@ran;1 ,
					@ran;2 ,
					@casti; )
	as source (idperfildet ,
					idperfilenc ,
					ran;1 ,
					ran;2 ,
					casti;  )
	on (target.idperfildet = source.idperfildet and 
		target.idperfilenc = source.idperfilenc)
	when matched then
	update set 		ran;1 = source.ran;1 ,
					ran;2 = source.ran;2 ,
					casti; = source.casti;
	when not matched then
	insert (idperfilenc ,
					ran;1 ,
					ran;2 ,
					casti; )
	values (source.idperfilenc ,
					source.ran;1 ,
					source.ran;2 ,
					source.casti; );
	set @idperfilenc = SCOPE_IDENTITY()	
end
;
/****** Object:  StoredProcedure `pa_insertaperfilresventaenc`    Script Date: 12/04/2024 11:11:52 AM ******/


create procedure `pa_insertaperfilresventaenc`
@idperfilenc int output,
@descripcion nvarchar(30),
@idestatus int,
@fechacreacion datetime,
@fechaactualizacion datetime
as 
begin
	set nocount on
	merge cat_perfilresventaenc as target
	using (select @idperfilenc,
				  @descripcion ,
				  @idestatus ,
				  @fechacreacion ,
				  @fechaactualizacion )
	as source (idperfilenc,
				descripcion ,
				idestatus ,
				fechacreacion ,
				fechaactualizacion )
	on (target.idperfilenc = source.idperfilenc)
	when matched then
	update set descripcion = source.descripcion ,
				idestatus = source.idestatus ,
				fechaactualizacion = source.fechaactualizacion
	when not matched then
	insert (descripcion ,
				idestatus ,
				fechacreacion ,
				fechaactualizacion)
	values (source.descripcion ,
				source.idestatus ,
				source.fechacreacion ,
				source.fechaactualizacion);
	set @idperfilenc = SCOPE_IDENTITY()
end
return @idperfilenc
;
/****** Object:  StoredProcedure `pa_insertaperfilsfiventadet`    Script Date: 12/04/2024 11:11:52 AM ******/


create procedure `pa_insertaperfilsfiventadet`
@idperfildet int,
@idperfilenc int,
@ran;1 decimal(6,2),
@ran;2 decimal(6,2),
@casti; decimal(6,2)
as
begin
	set nocount on
	merge cat_perfilsfiventadet as target
	using (select @idperfildet ,
					@idperfilenc ,
					@ran;1 ,
					@ran;2 ,
					@casti; )
	as source (idperfildet ,
					idperfilenc ,
					ran;1 ,
					ran;2 ,
					casti;  )
	on (target.idperfildet = source.idperfildet and 
		target.idperfilenc = source.idperfilenc)
	when matched then
	update set 		ran;1 = source.ran;1 ,
					ran;2 = source.ran;2 ,
					casti; = source.casti;
	when not matched then
	insert (idperfilenc ,
					ran;1 ,
					ran;2 ,
					casti; )
	values (source.idperfilenc ,
					source.ran;1 ,
					source.ran;2 ,
					source.casti; );
	set @idperfilenc = SCOPE_IDENTITY()	
end
;
/****** Object:  StoredProcedure `pa_insertaperfilsfiventaenc`    Script Date: 12/04/2024 11:11:52 AM ******/


create procedure `pa_insertaperfilsfiventaenc`
@idperfilenc int output,
@descripcion nvarchar(30),
@idestatus int,
@fechacreacion datetime,
@fechaactualizacion datetime
as 
begin
	set nocount on
	merge cat_perfilsfiventaenc as target
	using (select @idperfilenc,
				  @descripcion ,
				  @idestatus ,
				  @fechacreacion ,
				  @fechaactualizacion )
	as source (idperfilenc,
				descripcion ,
				idestatus ,
				fechacreacion ,
				fechaactualizacion )
	on (target.idperfilenc = source.idperfilenc)
	when matched then
	update set descripcion = source.descripcion ,
				idestatus = source.idestatus ,
				fechaactualizacion = source.fechaactualizacion
	when not matched then
	insert (descripcion ,
				idestatus ,
				fechacreacion ,
				fechaactualizacion)
	values (source.descripcion ,
				source.idestatus ,
				source.fechacreacion ,
				source.fechaactualizacion);
	set @idperfilenc = SCOPE_IDENTITY()
end
return @idperfilenc
;
/****** Object:  StoredProcedure `pa_insertaperfiluhmlventadet`    Script Date: 12/04/2024 11:11:52 AM ******/


create procedure `pa_insertaperfiluhmlventadet`
@idperfildet int,
@idperfilenc int,
@ran;1 decimal(6,2),
@ran;2 decimal(6,2),
@LenghtNDS int,
@casti; decimal(6,2)
as
begin
	set nocount on
	merge cat_perfiluhmlventadet as target
	using (select @idperfildet ,
					@idperfilenc ,
					@ran;1 ,
					@ran;2 ,
					@LenghtNDS ,
					@casti; )
	as source (idperfildet ,
					idperfilenc ,
					ran;1 ,
					ran;2 ,
					LenghtNDS ,
					casti;  )
	on (target.idperfildet = source.idperfildet and 
		target.idperfilenc = source.idperfilenc)
	when matched then
	update set 		ran;1 = source.ran;1 ,
					ran;2 = source.ran;2 ,
					LenghtNDS = source.LenghtNDS ,
					casti; = source.casti;
	when not matched then
	insert (idperfilenc ,
					ran;1 ,
					ran;2 ,
					LenghtNDS ,
					casti; )
	values (source.idperfilenc ,
					source.ran;1 ,
					source.ran;2 ,
					source.LenghtNDS ,
					source.casti; );
	set @idperfilenc = SCOPE_IDENTITY()	
end
;
/****** Object:  StoredProcedure `pa_insertaperfiluhmlventaenc`    Script Date: 12/04/2024 11:11:52 AM ******/


create procedure `pa_insertaperfiluhmlventaenc`
@idperfilenc int output,
@descripcion nvarchar(30),
@idestatus int,
@fechacreacion datetime,
@fechaactualizacion datetime
as 
begin
	set nocount on
	merge cat_perfiluhmlventaenc as target
	using (select @idperfilenc,
				  @descripcion ,
				  @idestatus ,
				  @fechacreacion ,
				  @fechaactualizacion )
	as source (idperfilenc,
				descripcion ,
				idestatus ,
				fechacreacion ,
				fechaactualizacion )
	on (target.idperfilenc = source.idperfilenc)
	when matched then
	update set descripcion = source.descripcion ,
				idestatus = source.idestatus ,
				fechaactualizacion = source.fechaactualizacion
	when not matched then
	insert (descripcion ,
				idestatus ,
				fechacreacion ,
				fechaactualizacion)
	values (source.descripcion ,
				source.idestatus ,
				source.fechacreacion ,
				source.fechaactualizacion);
	set @idperfilenc = SCOPE_IDENTITY()
end
return @idperfilenc
;
/****** Object:  StoredProcedure `pa_insertaperfiluniventadet`    Script Date: 12/04/2024 11:11:52 AM ******/


create procedure `pa_insertaperfiluniventadet`
@idperfildet int,
@idperfilenc int,
@ran;1 decimal(6,2),
@ran;2 decimal(6,2),
@casti; decimal(6,2)
as
begin
	set nocount on
	merge cat_perfiluniventadet as target
	using (select @idperfildet ,
					@idperfilenc ,
					@ran;1 ,
					@ran;2 ,
					@casti; )
	as source (idperfildet ,
					idperfilenc ,
					ran;1 ,
					ran;2 ,
					casti;  )
	on (target.idperfildet = source.idperfildet and 
		target.idperfilenc = source.idperfilenc)
	when matched then
	update set 		ran;1 = source.ran;1 ,
					ran;2 = source.ran;2 ,
					casti; = source.casti;
	when not matched then
	insert (idperfilenc ,
					ran;1 ,
					ran;2 ,
					casti; )
	values (source.idperfilenc ,
					source.ran;1 ,
					source.ran;2 ,
					source.casti; );
	set @idperfilenc = SCOPE_IDENTITY()	
end
;
/****** Object:  StoredProcedure `pa_insertaperfiluniventaenc`    Script Date: 12/04/2024 11:11:52 AM ******/


create procedure `pa_insertaperfiluniventaenc`
@idperfilenc int output,
@descripcion nvarchar(30),
@idestatus int,
@fechacreacion datetime,
@fechaactualizacion datetime
as 
begin
	set nocount on
	merge cat_perfiluniventaenc as target
	using (select @idperfilenc,
				  @descripcion ,
				  @idestatus ,
				  @fechacreacion ,
				  @fechaactualizacion )
	as source (idperfilenc,
				descripcion ,
				idestatus ,
				fechacreacion ,
				fechaactualizacion )
	on (target.idperfilenc = source.idperfilenc)
	when matched then
	update set descripcion = source.descripcion ,
				idestatus = source.idestatus ,
				fechaactualizacion = source.fechaactualizacion
	when not matched then
	insert (descripcion ,
				idestatus ,
				fechacreacion ,
				fechaactualizacion)
	values (source.descripcion ,
				source.idestatus ,
				source.fechacreacion ,
				source.fechaactualizacion);
	set @idperfilenc = SCOPE_IDENTITY()
end
return @idperfilenc
;
/****** Object:  StoredProcedure `pa_insertaperfilventadet`    Script Date: 12/04/2024 11:11:52 AM ******/


CREATE procedure `pa_insertaperfilventadet`
@idperfildet int,
@idperfilenc int,
@idclasesenc int,
@diferencial int
as 
begin
	set nocount on
	merge cat_perfilventadet as target
	using (select @idperfildet ,
					@idperfilenc ,
					@idclasesenc ,
					@diferencial  )
	as source (idperfildet ,
				idperfilenc ,
				idclasesenc ,
				diferencial  )
	on (target.idperfildet = source.idperfildet and target.idperfilenc = source.idperfilenc)
	when matched then
	update set 	idclasesenc = source.idclasesenc ,
				diferencial = source.diferencial
	when not matched then
	insert (idperfilenc ,
				idclasesenc ,
				diferencial)
	values (source.idperfilenc ,
				source.idclasesenc ,
				source.diferencial);
	set @idperfilenc = SCOPE_IDENTITY()
end
;
/****** Object:  StoredProcedure `pa_insertaperfilventaenc`    Script Date: 12/04/2024 11:11:52 AM ******/


CREATE procedure `pa_insertaperfilventaenc`
@idperfilenc int output,
@descripcion nvarchar(30),
@idestatus int,
@fechacreacion datetime,
@fechaactualizacion datetime
as 
begin
	set nocount on
	merge cat_perfilventaenc as target
	using (select @idperfilenc,
				  @descripcion ,
				  @idestatus ,
				  @fechacreacion ,
				  @fechaactualizacion )
	as source (idperfilenc,
				descripcion ,
				idestatus ,
				fechacreacion ,
				fechaactualizacion )
	on (target.idperfilenc = source.idperfilenc)
	when matched then
	update set descripcion = source.descripcion ,
				idestatus = source.idestatus ,
				fechaactualizacion = source.fechaactualizacion
	when not matched then
	insert (descripcion ,
				idestatus ,
				fechacreacion ,
				fechaactualizacion)
	values (source.descripcion ,
				source.idestatus ,
				source.fechacreacion ,
				source.fechaactualizacion);
	set @idperfilenc = SCOPE_IDENTITY()
end
return @idperfilenc
;
/****** Object:  StoredProcedure `pa_insertaunidadventaenc`    Script Date: 12/04/2024 11:11:52 AM ******/


create procedure `pa_insertaunidadventaenc`
@idperfilenc int output,
@descripcion nvarchar(30),
@valorunidad decimal(10,4),
@idestatus int,
@fechacreacion datetime,
@fechaactualizacion datetime
as 
begin
	set nocount on
	merge cat_unidadventa as target
	using (select @idperfilenc,
				  @descripcion ,
				  @valorunidad ,
				  @idestatus ,
				  @fechacreacion ,
				  @fechaactualizacion )
	as source (idperfilenc,
				descripcion ,
				valorunidad ,
				idestatus ,
				fechacreacion ,
				fechaactualizacion )
	on (target.idperfilenc = source.idperfilenc)
	when matched then
	update set descripcion = source.descripcion ,
				valorunidad = source.valorunidad ,
				idestatus = source.idestatus ,
				fechaactualizacion = source.fechaactualizacion
	when not matched then
	insert (descripcion ,
				valorunidad,
				idestatus ,
				fechacreacion ,
				fechaactualizacion)
	values (source.descripcion ,
				source.valorunidad,
				source.idestatus ,
				source.fechacreacion ,
				source.fechaactualizacion);
	set @idperfilenc = SCOPE_IDENTITY()
end
return @idperfilenc
;
